{"version":3,"names":["React","useEffect","useState","forwardRef","TextInput","mask","unMask","MaskedTextInputComponent","ref","pattern","type","options","defaultValue","onChangeText","value","inputAccessoryView","autoCapitalize","textBold","textItalic","textDecoration","style","rest","styleSheet","fontWeight","fontStyle","textDecorationLine","getMaskedValue","getUnMaskedValue","defaultValueCustom","defaultValueCurrency","initialRawValue","initialMaskedValue","initialUnMaskedValue","maskedValue","setMaskedValue","unMaskedValue","setUnmaskedValue","rawValue","setRawValue","isInitialRender","setIsInitialRender","actualValue","onChange","newUnMaskedValue","length","newMaskedValue","undefined","MaskedTextInput"],"sources":["MaskedTextInput.tsx"],"sourcesContent":["import React, {\r\n  useEffect,\r\n  useState,\r\n  forwardRef,\r\n  ForwardRefRenderFunction,\r\n} from 'react'\r\nimport { TextInput, TextInputProps } from 'react-native'\r\nimport { mask, unMask } from '../utils/mask'\r\nimport type { FormatType, MaskOptions, StyleObj, TextDecorationOptions } from 'src/@types'\r\n\r\n\r\ntype TIProps = Omit<TextInputProps, 'onChangeText'>\r\nexport interface MaskedTextInputProps extends TIProps {\r\n  mask?: string\r\n  type?: FormatType\r\n  options?: MaskOptions\r\n  defaultValue?: string\r\n  onChangeText: (text: string, rawText: string) => void\r\n  inputAccessoryView?: JSX.Element\r\n  textBold?: boolean\r\n  textItalic?:boolean\r\n  textDecoration?:TextDecorationOptions\r\n  style?: StyleObj\r\n}\r\n\r\nexport const MaskedTextInputComponent: ForwardRefRenderFunction<\r\n  TextInput,\r\n  MaskedTextInputProps\r\n> = (\r\n  {\r\n    mask: pattern = '',\r\n    type = 'custom',\r\n    options = {} as MaskOptions,\r\n    defaultValue,\r\n    onChangeText,\r\n    value,\r\n    inputAccessoryView,\r\n    autoCapitalize = 'sentences',\r\n    textBold,\r\n    textItalic,\r\n    textDecoration,\r\n    style,\r\n    ...rest\r\n  },\r\n  ref\r\n): JSX.Element => {\r\n  const styleSheet = [\r\n    {\r\n      fontWeight: textBold && 'bold',\r\n      fontStyle: textItalic && 'italic',\r\n      textDecorationLine: textDecoration\r\n    },\r\n    style\r\n  ]\r\n  const getMaskedValue = (value: string) =>\r\n    mask(value, pattern, type, options, autoCapitalize)\r\n  const getUnMaskedValue = (value: string) =>\r\n    unMask(value, type as 'custom' | 'currency')\r\n\r\n  const defaultValueCustom = defaultValue || ''\r\n  const defaultValueCurrency = defaultValue || '0'\r\n\r\n  const initialRawValue = value;\r\n\r\n  const initialMaskedValue = getMaskedValue(\r\n    type === 'currency' ? defaultValueCurrency : defaultValueCustom\r\n  )\r\n\r\n  const initialUnMaskedValue = getUnMaskedValue(\r\n    type === 'currency' ? defaultValueCurrency : defaultValueCustom\r\n  )\r\n\r\n  const [maskedValue, setMaskedValue] = useState(initialMaskedValue)\r\n  const [unMaskedValue, setUnmaskedValue] = useState(initialUnMaskedValue)\r\n  const [rawValue, setRawValue] = useState(initialRawValue);\r\n  const [isInitialRender, setIsInitialRender] = useState(true)\r\n\r\n  const actualValue = pattern || type === \"currency\" ? maskedValue : rawValue;\r\n\r\n  function onChange(value: string) {\r\n    let newUnMaskedValue =  unMask(value, type as 'custom' | 'currency')\r\n    if(newUnMaskedValue === '7' || newUnMaskedValue === '8') {\r\n      newUnMaskedValue = '7'\r\n    } else if(newUnMaskedValue.length === 1) {\r\n      newUnMaskedValue = '79'\r\n    }\r\n    const newMaskedValue = mask(newUnMaskedValue, pattern, type, options)\r\n\r\n    setMaskedValue(newMaskedValue)\r\n    setUnmaskedValue(newUnMaskedValue)\r\n    setRawValue(value);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (isInitialRender) {\r\n      setIsInitialRender(false)\r\n      return\r\n    }\r\n\r\n    onChangeText(maskedValue, unMaskedValue)\r\n  }, [maskedValue, unMaskedValue])\r\n\r\n  useEffect(() => {\r\n    if (value) {\r\n      setMaskedValue(getMaskedValue(value))\r\n      setUnmaskedValue(getUnMaskedValue(value))\r\n    } else {\r\n      setMaskedValue(initialMaskedValue)\r\n      setUnmaskedValue(initialUnMaskedValue)\r\n    }\r\n  }, [value])\r\n\r\n  return (\r\n    <>\r\n      <TextInput\r\n        onChangeText={(value) => onChange(value)}\r\n        ref={ref}\r\n        maxLength={pattern.length || undefined}\r\n        autoCapitalize={autoCapitalize}\r\n        {...rest}\r\n        value={actualValue}\r\n        style={styleSheet as StyleObj}\r\n      />\r\n      {inputAccessoryView}\r\n    </>\r\n  )\r\n}\r\n\r\nexport const MaskedTextInput = forwardRef(MaskedTextInputComponent)\r\n"],"mappings":"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"}